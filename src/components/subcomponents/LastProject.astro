---
import { Image } from '@astrojs/image/components';
export type Props = {
  image: ImageMetadata;
  title: string;
  description: string;
};

const { image, title, description } = Astro.props;
---

<div class="flex gap-6 text-black/90">
  <div class="progress-vertical-one-service relative mt-[100px] bg-black/90 border-black/90 border-l rounded-none">
    <div
      class="absolute bottom-0 left-1/2 h-4 w-4 -translate-x-1/2 translate-y-full overflow-hidden rounded-full border border-black"
    >
    </div>
  </div>
  <div class="flex flex-col gap-4">
    <Image
      src={image}
      alt="Photo de fond(un pot de fleur avec de la decoration)"
      class="h-full max-h-52 w-full object-cover"
    />
    <p class="font-larken text-xl">{title}</p>
    <div class="max-h-32 overflow-y-auto">
      <p class="pr-4 font-poppins text-sm">{description}</p>
    </div>
  </div>
</div>

<style>
  .progress-vertical-one-service {
    width: 1px;
    height: 0px;
  }
  .progress-vertical-one-service.animate {
    animation: progress-vertical-one-service 2s ease-in-out forwards;
  }
  @keyframes progress-vertical-one-service {
    0% {
      height: 0px;
    }
    100% {
      height: 120px;
    }
  }
</style>

<script>
  // Fonction de rappel pour l'intersection
  function handleIntersection(entries: IntersectionObserverEntry[], observer: IntersectionObserver) {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add('animate');
        observer.unobserve(entry.target);
      }
    });
  }

  // Créer l'instance de l'observateur
  const observer = new IntersectionObserver(handleIntersection);

  // Sélectionner l'élément cible
  const element = document.querySelectorAll('.progress-vertical-one-service');

  // Observer l'élément cible
  if (element) {
    element.forEach((el) => {
      observer.observe(el);
    });
  }
</script>
